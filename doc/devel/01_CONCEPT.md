# VTuneHub - VTuber統合管理システム コンセプトドキュメント

## 1. プロジェクト概要

### 1.1 サービス名
**VTuneHub** (ブイチューンハブ)
- VTuber活動のハブとして、配信に伴う作業を効率化するシステム

### 1.2 ビジョン
VTuber活動における煩雑な管理業務を一元化し、配信者が本来のクリエイティブ活動に集中できる環境を提供する。技術的知識がなくても直感的に操作でき、完全無料で運用可能な統合管理プラットフォーム。

### 1.3 提供価値

#### VTuber（配信者）への価値
- **業務効率化**: 配信準備から振り返りまでの作業を50%削減
- **ミス防止**: チェックリストによる配信事故の予防
- **視聴者満足度向上**: 楽曲リクエスト対応の効率化
- **成長支援**: アナリティクスによる客観的な活動分析

#### リスナー（視聴者）への価値
- **利便性向上**: 配信スケジュール・楽曲リストの簡単確認
- **参加感向上**: リクエスト可能楽曲の透明性
- **アクセス性**: スマートフォンからの快適な閲覧

## 2. システム構成

### 2.1 アーキテクチャ

```
┌─────────────────────────────────────────────────┐
│                   ユーザー層                      │
├──────────────────┬──────────────────────────────┤
│   管理画面(SPA)   │    公開ページ(Static)         │
│  - 認証付き       │    - 認証なし                │
│  - React         │    - 静的HTML/CSS/JS         │
└──────────────────┴──────────────────────────────┘
                    ▼
┌─────────────────────────────────────────────────┐
│            Cloudflare Workers                    │
│  - API エンドポイント                             │
│  - 認証処理 (Magic Link)                         │
│  - データ検証・変換                               │
└──────────────────────────────────────────────────┘
                    ▼
┌─────────────────────────────────────────────────┐
│              データ層                             │
├──────────────────┬──────────────────────────────┤
│  Cloudflare D1    │    Cloudflare KV             │
│  - 永続データ      │    - セッション               │
│  - SQLite         │    - キャッシュ               │
└──────────────────┴──────────────────────────────┘
```

### 2.2 技術スタック

| レイヤー | 技術 | 選定理由 |
|---------|------|----------|
| フロントエンド | React + TypeScript | 型安全性とエコシステムの充実 |
| スタイリング | Tailwind CSS | 開発速度とカスタマイズ性 |
| バックエンド | Cloudflare Workers | サーバーレス・低コスト運用 |
| データベース | Cloudflare D1 | SQLiteベース・Workers統合 |
| キャッシュ | Cloudflare KV | 高速読み取り・セッション管理 |
| 認証 | Magic Link (自前実装) | UX向上・パスワード管理不要 |
| ホスティング | Cloudflare Pages | Workers統合・グローバルCDN |

### 2.3 料金体系

**完全無料** - Cloudflareの無料枠内で全機能を提供

| サービス | 無料枠 | 想定使用量 |
|---------|--------|-----------|
| Workers | 10万リクエスト/日 | 1,000リクエスト/日 |
| D1 | 10GB | 100MB |
| KV | 10万読み取り/日 | 5,000読み取り/日 |
| Pages | 無制限 | - |

## 3. 機能仕様

### 3.1 コア機能マップ

```
VTuneHub
├── 認証・ユーザー管理
│   ├── Magic Link認証
│   ├── セッション管理
│   └── プロフィール設定
│
├── 配信管理
│   ├── スケジュール管理
│   │   ├── カレンダービュー
│   │   ├── 定期配信設定
│   │   └── SNS告知文生成
│   ├── 配信準備チェックリスト
│   │   ├── テンプレート管理
│   │   └── チェック履歴
│   └── 配信メタデータ管理
│
├── コンテンツ管理
│   ├── 楽曲データベース
│   │   ├── 楽曲登録・編集
│   │   ├── ジャンル分類
│   │   └── 歌唱履歴記録
│   ├── リクエスト・質問管理
│   │   ├── 自動取得
│   │   ├── カテゴリ分類
│   │   └── 回答履歴
│   └── セットリスト作成
│
├── 公開ページ機能
│   ├── 配信スケジュール
│   ├── 歌枠リクエストリスト
│   └── リンク集
│
└── アナリティクス
    ├── 配信統計
    ├── 楽曲パフォーマンス
    └── 成長トレンド
```

### 3.2 機能詳細

#### 3.2.1 認証システム

**Magic Link認証フロー**
1. メールアドレス入力
2. 認証メール送信（有効期限15分）
3. リンククリックで認証完了
4. 30日間有効なセッション発行

**実装詳細**
- セッションはhttpOnly Cookieで管理
- CSRF対策としてSameSite=Lax設定
- レート制限: 1IPあたり10回/時

#### 3.2.2 配信スケジュール管理

**データモデル(例)**
```typescript
interface Stream {
  id: string;
  title: string;
  scheduledAt: Date;
  platform: 'youtube' | 'twitch' | 'niconico';
  streamType: 'chat' | 'game' | 'singing' | 'collab';
  description?: string;
  thumbnailUrl?: string;
  tags: string[];
  isPublic: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

**機能仕様**
- ドラッグ&ドロップでの予定変更
- 繰り返し配信の自動生成
- iCal形式でのエクスポート
- 配信15分前のリマインダー（ブラウザ通知）

#### 3.2.3 楽曲管理システム

**データモデル(例)**
```typescript
interface Song {
  id: string;
  title: string;
  artist: string;
  genre: string[];
  key?: string;
  tempo?: number;
  status: 'ready' | 'practice' | 'retired';
  karaokeNumber?: {
    dam?: string;
    joysound?: string;
  };
  lastPerformed?: Date;
  performanceCount: number;
  notes?: string;
  tags: string[];
}
```

**検索・フィルタリング**
- 全文検索（曲名・アーティスト・タグ）
- ジャンル複数選択フィルタ
- ステータス別表示
- 人気順・最近歌った順ソート

#### 3.2.4 リクエスト・質問管理

**自動取得仕様**
- NGワードフィルタリング
- 質問の自動カテゴライズ

**配信用表示モード**
- OBS Browser Source対応
- カスタマイズ可能なデザインテーマ
- アニメーション効果

#### 3.2.5 公開ページ

**技術仕様**
- 完全静的生成（ビルド時）
- PWA対応（オフライン閲覧可能）
- OGP自動生成
- 構造化データ（JSON-LD）埋め込み

**パフォーマンス目標**
- Lighthouse Score: 95以上
- First Contentful Paint: 1.0秒以内
- Time to Interactive: 2.0秒以内

### 3.3 非機能要件

#### セキュリティ
- Content Security Policy設定
- Rate Limiting（API: 100req/min）
- SQLインジェクション対策（プリペアドステートメント）
- XSS対策（React自動エスケープ + DOMPurify）

#### パフォーマンス
- API応答時間: p95で200ms以内
- 同時接続数: 1000ユーザー対応
- データベースクエリ: インデックス最適化

#### 可用性
- Cloudflare Global Networkによる99.9%稼働
- 自動フェイルオーバー
- エラー時の graceful degradation

## 4. ユーザー体験設計

### 4.1 ペルソナ

#### Primary: 個人VTuber「みゆき」
- 活動歴: 1年
- 技術レベル: 初級（Spreadsheet使える程度）
- 課題: 配信準備に時間がかかる、楽曲管理が煩雑
- 目標: もっと配信内容に集中したい

#### Secondary: リスナー「たける」
- 視聴歴: 2年
- デバイス: スマートフォン中心
- 課題: 推しの配信予定を見逃す、リクエストしたい曲がわからない
- 目標: 推しの配信を全て追いたい

### 4.2 ユーザージャーニー

```
[初回セットアップ]
1. ランディングページ訪問
   └→ 「無料で始める」クリック
2. メールアドレス入力
   └→ Magic Link受信
3. 認証完了
   └→ オンボーディング開始
4. 基本情報入力
   └→ ダッシュボード表示

[日常利用]
1. ダッシュボードアクセス
2. 今週の配信予定確認
3. 配信準備チェックリスト確認
4. リクエスト・質問確認・整理
5. 配信実施
6. アナリティクス確認
```

### 4.3 UI/UXガイドライン

#### デザイン原則
1. **Simple**: 機能を詰め込みすぎない
2. **Intuitive**: 説明なしで使える
3. **Responsive**: どのデバイスでも快適
4. **Accessible**: WCAG 2.1 AA準拠
5. **Delightful**: 使っていて楽しい

## 5. 運用・保守

### 5.1 監視項目

| 項目 | 閾値 | アラート条件 |
|-----|------|------------|
| API応答時間 | 500ms | p95 > 500ms |
| エラー率 | 1% | 5分間で1%超過 |
| Workers使用量 | 90,000/日 | 90%到達 |
| D1容量 | 8GB | 80%到達 |

### 5.2 バックアップ戦略
- D1: 日次自動バックアップ（Workers Cron）
- エクスポート: CSV/JSON形式での全データエクスポート機能
- リストア: Web UIからのワンクリックリストア

### 5.3 アップデート戦略
- Blue-Green Deployment
- 段階的ロールアウト（10% → 50% → 100%）
- 自動ロールバック機能

## 6. 成功指標

### 6.1 定量的指標

| KPI | 目標値 | 測定方法 |
|-----|--------|---------|
| MAU（月間アクティブユーザー） | 100名 | Google Analytics |
| 平均セッション時間 | 5分以上 | Google Analytics |
| 配信準備時間削減率 | 50% | ユーザーアンケート |
| システム稼働率 | 99.9% | Cloudflare Analytics |

### 6.2 定性的指標
- ユーザー満足度（NPS: 40以上）
- 機能リクエストの実装率（月2機能以上）
- コミュニティの活性度（Discord参加者数）

## 7. リスクと対策

### 7.1 技術的リスク

| リスク | 影響度 | 発生確率 | 対策 |
|-------|--------|----------|------|
| Cloudflare障害 | 高 | 低 | マルチリージョン対応 |
| APIレート制限 | 中 | 中 | キャッシュ戦略強化 |
| データ損失 | 高 | 低 | 自動バックアップ |

### 7.2 事業リスク

| リスク | 影響度 | 発生確率 | 対策 |
|-------|--------|----------|------|
| 競合サービス登場 | 中 | 高 | 差別化機能の継続開発 |
| ユーザー獲得困難 | 高 | 高 | ？ |
| 無料枠超過 | 中 | 低 | 有料プラン検討 |

## 8. 将来展望

### 8.1 短期
- Discord Bot連携
- 配信アーカイブ管理

### 8.2 中期
- モバイルアプリ（React Native）
- AI機能（文章からのスケジュール抽出や自動スケジューリングなど）

### 8.3 長期
- グローバル展開（多言語対応）
- コラボレーション機能
- 収益分析ダッシュボード

## 9. まとめ

VTuneHubは、VTuber活動の「めんどくさい」を解決し、クリエイティブな活動に集中できる環境を提供します。Cloudflareのモダンなインフラを最大限活用し、完全無料で高品質なサービスを実現。シンプルなMVPから始め、ユーザーフィードバックを基に着実に成長させていく、持続可能なプロダクトを目指します。

